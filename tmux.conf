# TPM
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-pain-control'

# TPM Options
# Prefix Highlight
set -g @prefix_highlight_fg 'colour19'
set -g @prefix_highlight_bg 'colour18'

# Settings
set -g detach-on-destroy on
setw -g mode-mouse off

set -g history-limit 5000

# Set window notifications
setw -g monitor-activity off
set -g visual-activity off

# Ctrl versions of default keybindings
bind C-c new-window
bind C-w choose-window

# Split window into panes
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Use Alt-[j/i/l/k] keys without prefix key to switch panes.
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# for nested sessions
bind b send-prefix

# pane resizing
bind Z resize-pane -Z

bind X confirm-before kill-window
bind x confirm-before kill-pane

# custom command bindings
bind C command-prompt -p "command:" "new-window '%1 && sleep 3s'"

bind C-l split-window '~/.bin.untracked/tmux_start_mutt'

bind M setw monitor-activity
bind N command-prompt -p "timeout:" "setw monitor-silence %1"

# Colorsettings
set-window-option -g window-status-format '#[fg=colour18][#[fg=colour20]#I-#W#[fg=colour18]]#[fg=colour19]'
set-window-option -g window-status-current-format '#[fg=colour4][#I-#W]#[fg=colour20]'

set -g status-justify left

set -g status-bg colour18
set -g status-fg white
set -g status-left-length 30
set -g status-right-length 100

set -g status-left '#[bg=colour18,fg=colour4] Â» #[fg=colour21]#S#[fg=colour20]@#H#[fg=colour19] |'
set -g status-right '#{prefix_highlight}#(tmux_status)'

unbind C-z

# Check if TPM is installed
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm'"
# Initialize TMUX plugin manager (keep this line at the very bottom of
# tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
