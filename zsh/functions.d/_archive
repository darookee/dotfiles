#compdef archive

_archive() {
    actions=(
        'ls:list archives or contents'
        'rm:remove from achive'
        'add:add folder to archive',
        'restore:restore files from archive'
    )

    if (( CURRENT == 2 )); then
        _describe -t actions 'actions' actions
    elif (( CURRENT == 3 )); then
        case $words[2] in
            add)
                _arguments \
                    "*::folder:_files -/"
                ;;
            ls|rm|restore)
                _arguments \
                    "*::archives:_files -W ${archivedir}"
                ;;
        esac
    fi
}

# vim:fdm=marker ft=zsh
